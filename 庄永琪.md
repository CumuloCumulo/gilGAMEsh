# 0129
## Automaå¦‚ä½•å¤ç”¨
å…³äºç”¨æˆ·æ“ä½œçš„è®°å½•ï¼Œå¯ä¸å¯ä»¥ä½¿ç”¨çš„æ—¶å€™è‡ªåŠ¨å¼€å¯automaä¸­æ„é€ é€‰æ‹©å™¨çš„åŠŸèƒ½ï¼Œé€šè¿‡é€‰æ‹©å™¨è§¦å‘ï¼Œå¯ä»¥ç›´æ¥éªŒè¯è¯¥å…ƒç´ å¯å¦ç”±é€‰æ‹©å™¨è§¦å‘

å…³äºé€‰æ‹©å™¨çš„ç›¸å…³å†…å®¹ï¼Œä¸»è¦åˆ†ä¸ºä¸¤ç‚¹ï¼šé€‰æ‹©å™¨çš„ç”Ÿæˆã€é€‰æ‹©å™¨çš„ä½¿ç”¨

é€‰æ‹©å™¨æ˜¯å¦éœ€è¦å¤šä¸ªï¼Œå¦‚ä½•ç”Ÿæˆæ—¶åˆ¤æ–­éœ€è¦å“ªç§ç±»å‹ï¼Œå¯ä¸å¯ä»¥è®©aiæ¥åˆ¤æ–­

ä½•æ—¶éœ€è¦æ ¹æ®æ–‡æœ¬ç”Ÿæˆä¸´æ—¶é€‰æ‹©å™¨ï¼šæµç¨‹ä¸­æ ¹æ®ç”¨æˆ·ç‚¹å‡»ç”Ÿæˆé€‰æ‹©å™¨æ¡†æ¶ï¼Œaiå…·ä½“æ‰§è¡Œæ—¶å…ˆè¯»å–å†æ·»å‚æ•°

å»¶æ—¶å¦‚ä½•åŠ å…¥ï¼Œå¦‚ä½•æ„ŸçŸ¥é¡µé¢å…ƒç´ å·²åŠ è½½å®Œæˆ

æœ€é‡è¦çš„å‡ ç±»æ“ä½œï¼š

1.ç‚¹å‡»

2.è¯»å–

ä½•æ—¶éœ€è¦å…¨éƒ¨é¡µé¢è¯»å–

3.å¡«å†™

4.é¡µé¢è·³è½¬



æ„å»ºé€‰æ‹©å™¨æ—¶éœ€è¦æ³¨æ„è¯¥å…ƒç´ æ˜¯å•ä¸€å…ƒç´ è¿˜æ˜¯å¹¶åˆ—å…ƒç´ ä¸­çš„ä¸€ä¸ªï¼Œæ¥åˆ¤æ–­é€‰æ‹©å™¨å…·ä½“çš„ä½¿ç”¨æ–¹æ³•

automaä¸­è¿™ä¸ªuiå¯ä»¥å‚è€ƒ

<!-- è¿™æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œocr å†…å®¹ä¸ºï¼š -->
![](https://cdn.nlark.com/yuque/0/2026/png/49377948/1769676045701-86cbabc0-1cb3-4072-ab59-9e4fe2d14362.png)



å½•åˆ¶æ—¶åŠ¨ä½œé›†å¦‚ä½•è®©aiå¤„ç†ï¼Œ

äººå¦‚ä½•ä¿®æ”¹



å¿…éœ€æ”¯æŒå•æ­¥æ‰§è¡Œï¼Œæ‰§è¡Œåéœ€è¦è·å–æˆåŠŸä¸å¦ä¿¡æ¯



é¡µé¢æ“ä½œéœ€è¦å°è£…æˆå‡½æ•°ï¼Œå¹¶ç•™å‡ºaiå¡«å†™çš„å‚æ•°





åŸå­åŒ–å·¥å…·é›†åº”è¯¥æ˜¯ç¼ºå‚çš„ï¼Œå½“agentå¼€å§‹ä¸€ä¸ªåŸå­åŒ–å·¥å…·æ—¶ï¼Œé¦–å…ˆåˆ¤æ–­æ˜¯å¦éœ€è¦å¡«å‚ï¼Œéœ€è¦çš„è¯é¦–å…ˆè·å–å½“å‰é¡µé¢æ–‡æœ¬ï¼Œå¡«å‚åå¼€å§‹æ‰§è¡Œï¼ŒéªŒè¯åé¦ˆåé€‰æ‹©ä¸‹ä¸€ä¸ªä½¿ç”¨çš„åŸå­åŒ–å·¥å…·

# 0130
## Homuraå¼€å‘
å…ˆæŠŠå¤§è‡´uiæ“å‡ºæ¥äº†ï¼Œè™½ç„¶è¿˜ä¸æ˜¯å¾ˆå®Œå–„ï¼Œå…·ä½“åŠŸèƒ½è¿˜æ²¡å®ç°

<!-- è¿™æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œocr å†…å®¹ä¸ºï¼š -->
![](https://cdn.nlark.com/yuque/0/2026/png/49377948/1769764269072-ae30ad16-cad3-4fdc-9924-cd36bce95067.png)

# 0131
## ä¸¤ç§é€‰æ‹©å™¨åŠŸèƒ½å®ç°ä¸­
[æ­¤å¤„ä¸ºè¯­é›€å¡ç‰‡ï¼Œç‚¹å‡»é“¾æ¥æŸ¥çœ‹](about:blank#SB2px)

# 0201
## é€‰æ‹©å™¨åŠŸèƒ½å®Œå–„ä¸­
[æ­¤å¤„ä¸ºè¯­é›€å¡ç‰‡ï¼Œç‚¹å‡»é“¾æ¥æŸ¥çœ‹](about:blank#f78vB)

<details class="lake-collapse"><summary id="ue0435e56"><span class="ne-text">ä¿®å¤</span></summary><h2 id="fb11cabf"><span class="ne-text">âœ…</span><span class="ne-text"> é—®é¢˜ 1: ä¸¤ç§é€‰æ‹©å™¨æ˜¯å¦æœ‰é›†ä¸­ç»Ÿä¸€çš„ Schemaï¼Ÿ</span></h2><p id="uce974adb" class="ne-p"><strong><span class="ne-text" style="font-size: 13px">ç­”æ¡ˆï¼šæ˜¯</span></strong><strong><span class="ne-text" style="font-size: 13px">çš„</span></strong><strong><span class="ne-text" style="font-size: 13px">ï¼Œå·²</span></strong><strong><span class="ne-text" style="font-size: 13px">ç»</span></strong><strong><span class="ne-text" style="font-size: 13px">æœ‰äº†</span></strong><strong><span class="ne-text" style="font-size: 13px">ã€‚</span></strong></p><p id="u9590a138" class="ne-p"><span class="ne-text" style="font-size: 13px">å½“</span><span class="ne-text" style="font-size: 13px">å‰ä»£ç ä¸­å®š</span><span class="ne-text" style="font-size: 13px">ä¹‰äº†</span><span class="ne-text" style="font-size: 13px"> </span><span class="ne-text" style="font-size: 13px">UnifiedSelector</span><span class="ne-text" style="font-size: 13px"> </span><span class="ne-text" style="font-size: 13px">ä½œ</span><span class="ne-text" style="font-size: 13px">ä¸º</span><strong><span class="ne-text" style="font-size: 13px">ç»Ÿä¸€çš„</span></strong><strong><span class="ne-text" style="font-size: 13px">æ ¸</span></strong><strong><span class="ne-text" style="font-size: 13px">å¿ƒ</span></strong><strong><span class="ne-text" style="font-size: 13px"> </span></strong><strong><span class="ne-text" style="font-size: 13px">Schema</span></strong><span class="ne-text" style="font-size: 13px">ï¼Œä½</span><span class="ne-text" style="font-size: 13px">äº</span><span class="ne-text" style="font-size: 13px"> </span><span class="ne-text" style="font-size: 13px">src/shared</span><span class="ne-text" style="font-size: 13px">/types</span><span class="ne-text" style="font-size: 13px">.ts</span><span class="ne-text" style="font-size: 13px">:</span></p><pre data-language="markdown" id="mcjbR" class="ne-codeblock language-markdown"><code>// src/shared/types.ts (ç¬¬ 390-436 è¡Œ)
export interface UnifiedSelector {
  id: string;
  strategy: 'path' | 'scope_anchor_target' | 'direct';
  fullSelector: string;
  
  // ç­–ç•¥ A: Path Selector
  pathData?: {
    root: string;
    intermediates: string[];
    target: string;
  };
  
  // ç­–ç•¥ B: Scope + Anchor + Target
  structureData?: {
    scope: { selector: string; type: 'container_list' | 'single_container' };
    anchor?: { selector: string; type: string; value: string; matchMode: string };
    target: { selector: string };
  };
  
  action: { type: 'CLICK' | 'INPUT' | 'EXTRACT' | ... };
  confidence: number;
  validated: boolean;
  reasoning?: string;
}</code></pre><p id="u00b20fc6" class="ne-p"><br></p><hr id="ujbhD" class="ne-hr"><h2 id="175aba96"><span class="ne-text">âœ…</span><span class="ne-text"> é—®</span><span class="ne-text">é¢˜ 2: æ’</span><span class="ne-text">ä»¶èƒ½</span><span class="ne-text">å¦æ ¹</span><span class="ne-text">æ® Schema è¿›</span><span class="ne-text">è¡Œ</span><span class="ne-text"> </span><span class="ne-text">UI</span><span class="ne-text"> </span><span class="ne-text">æ¸²æŸ“å’Œ</span><span class="ne-text">æ‰§</span><span class="ne-text">è¡Œï¼Ÿ</span></h2><p id="u15fd0434" class="ne-p"><strong><span class="ne-text" style="font-size: 13px">ç­”æ¡ˆï¼šæ˜¯</span></strong><strong><span class="ne-text" style="font-size: 13px">çš„ï¼Œå·²</span></strong><strong><span class="ne-text" style="font-size: 13px">ç»å®</span></strong><strong><span class="ne-text" style="font-size: 13px">ç°äº†ã€‚</span></strong></p><h3 id="e940ec1d"><span class="ne-text">UI</span><span class="ne-text"> </span><span class="ne-text">æ¸²æŸ“</span></h3><p id="u4378ca4e" class="ne-p"><span class="ne-text" style="font-size: 13px">record</span><span class="ne-text" style="font-size: 13px">ing</span><span class="ne-text" style="font-size: 13px">Store</span><span class="ne-text" style="font-size: 13px">.ts</span><span class="ne-text" style="font-size: 13px"> </span><span class="ne-text" style="font-size: 13px">ä¸­</span><span class="ne-text" style="font-size: 13px"> </span><span class="ne-text" style="font-size: 13px">un</span><span class="ne-text" style="font-size: 13px">ifiedSelector</span><span class="ne-text" style="font-size: 13px"> </span><span class="ne-text" style="font-size: 13px">æ˜¯</span><strong><span class="ne-text" style="font-size: 13px">å•</span></strong><strong><span class="ne-text" style="font-size: 13px">ä¸€</span></strong><strong><span class="ne-text" style="font-size: 13px">çœŸ</span></strong><strong><span class="ne-text" style="font-size: 13px">ç›¸</span></strong><strong><span class="ne-text" style="font-size: 13px">æ¥</span></strong><strong><span class="ne-text" style="font-size: 13px">æº</span></strong><span class="ne-text" style="font-size: 13px">ï¼š</span></p><pre data-language="markdown" id="VyBT4" class="ne-codeblock language-markdown"><code>// src/sidepanel/stores/recordingStore.ts (ç¬¬ 38-44 è¡Œ)
interface RecordingStore {
  /** @deprecated Use unifiedSelector instead */
  selectorDraft: SelectorDraft | null;
  
  /** Unified selector - the single source of truth */
  unifiedSelector: UnifiedSelector | null;
}
UI ç»„ä»¶æ ¹æ® strategy å­—æ®µå†³å®šæ¸²æŸ“æ¨¡å¼ï¼š
// InspectMode.tsx ä¸­çš„é€»è¾‘
const activeMode = useMemo(() =&gt; {
  if (unifiedSelector?.strategy === 'scope_anchor_target') return 'structure';
  if (unifiedSelector?.strategy === 'path') return 'path';
  return 'path';
}, [unifiedSelector]);</code></pre><h3 id="a94b229e"><span class="ne-text">æ‰§è¡Œæµ</span><span class="ne-text">ç¨‹</span></h3><p id="ueb1dede7" class="ne-p"><span class="ne-text" style="font-size: 13px">executor</span><span class="ne-text" style="font-size: 13px">.ts</span><span class="ne-text" style="font-size: 13px"> </span><span class="ne-text" style="font-size: 13px">ä¸­æ</span><span class="ne-text" style="font-size: 13px">ä¾›äº†ç»Ÿ</span><span class="ne-text" style="font-size: 13px">ä¸€æ‰§</span><span class="ne-text" style="font-size: 13px">è¡Œå…¥</span><span class="ne-text" style="font-size: 13px">å£ï¼š</span></p><pre data-language="markdown" id="X4HdV" class="ne-codeblock language-markdown"><code>// src/content/engine/executor.ts (ç¬¬ 408-436 è¡Œ)
export async function executeUnifiedSelector(
  selector: UnifiedSelector,
  params: Record&lt;string, string | number | boolean&gt; = {},
  options: ExecutorOptions = {}
): Promise&lt;ExecuteToolResult&gt; {
  // 1. è½¬æ¢ä¸º SelectorLogic
  const selectorLogic = convertUnifiedToSelectorLogic(selector);
  
  // 2. å˜é‡æ›¿æ¢
  const resolvedLogic = resolveVariables(selectorLogic, params);
  
  // 3. æ‰§è¡Œ Scope â†’ Anchor â†’ Target é€»è¾‘
  const result = await executeSelectionLogic(resolvedLogic, options);
  
  return result;
}</code></pre><h3 id="e109baec"><span class="ne-text">æ•°</span><span class="ne-text">æ®æµ</span></h3><pre data-language="markdown" id="vC1QF" class="ne-codeblock language-markdown"><code>ç”¨æˆ·ç‚¹å‡»å…ƒç´ 
      â†“
analyzeElement() â†’ ElementAnalysis
      â†“
createUnifiedSelector() â†’ UnifiedSelector  â† ç»Ÿä¸€å…¥å£
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UI æ¸²æŸ“ (æ ¹æ® strategy å­—æ®µ)              â”‚
â”‚ â€¢ PathVisualizer (strategy = 'path')    â”‚
â”‚ â€¢ StructureView (strategy = 'structure')â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
executeUnifiedSelector() â†’ æ‰§è¡ŒåŠ¨ä½œ</code></pre><hr id="FajsL" class="ne-hr"><h2 id="d3ba7570"><span class="ne-text">âœ…</span><span class="ne-text"> é—®é¢˜ 3: æ£€</span><span class="ne-text">æŸ¥æ¨¡</span><span class="ne-text">å¼è·</span><span class="ne-text">å–</span><span class="ne-text">å“ªäº›æ•°</span><span class="ne-text">æ®ï¼Ÿæœ‰</span><span class="ne-text">æ— </span><span class="ne-text">æ˜</span><span class="ne-text">ç¡®</span><span class="ne-text"> </span><span class="ne-text">Schema ä¾›</span><span class="ne-text"> </span><span class="ne-text">AI</span><span class="ne-text"> </span><span class="ne-text">ä½¿ç”¨ï¼Ÿ</span></h2><p id="u71c4e624" class="ne-p"><strong><span class="ne-text" style="font-size: 13px">ç­”æ¡ˆ</span></strong><strong><span class="ne-text" style="font-size: 13px">ï¼šæœ‰æ˜</span></strong><strong><span class="ne-text" style="font-size: 13px">ç¡®çš„ Schemaã€‚</span></strong></p><h3 id="c70ca682"><span class="ne-text">è·</span><span class="ne-text">å–çš„</span><span class="ne-text">æ•°æ®</span><span class="ne-text"> </span><span class="ne-text">(</span><span class="ne-text">Element</span><span class="ne-text">Analysis</span><span class="ne-text">)</span></h3><p id="ud66316aa" class="ne-p"><span class="ne-text" style="font-size: 13px">å®š</span><span class="ne-text" style="font-size: 13px">ä¹‰åœ¨</span><span class="ne-text" style="font-size: 13px"> </span><span class="ne-text" style="font-size: 13px">src/shared/</span><span class="ne-text" style="font-size: 13px">s</span><span class="ne-text" style="font-size: 13px">electorBuilder/types</span><span class="ne-text" style="font-size: 13px">.ts</span><span class="ne-text" style="font-size: 13px"> </span><span class="ne-text" style="font-size: 13px">(ç¬¬ 1</span><span class="ne-text" style="font-size: 13px">5</span><span class="ne-text" style="font-size: 13px">-6</span><span class="ne-text" style="font-size: 13px">4 è¡Œ):</span></p><pre data-language="markdown" id="kfqW5" class="ne-codeblock language-markdown"><code>export interface ElementAnalysis {
  // åŸºç¡€ä¿¡æ¯
  target?: HTMLElement;
  containerType: 'table' | 'list' | 'grid' | 'card' | 'single';
  
  // é€‰æ‹©å™¨ä¿¡æ¯
  minimalSelector: string;        // &quot;.search-bar button&quot;
  targetSelector?: string;        // &quot;button&quot;
  relativeSelector: string;       // ç›¸å¯¹äºå®¹å™¨çš„é€‰æ‹©å™¨
  scopedSelector?: string;        // å®Œæ•´ä½œç”¨åŸŸé€‰æ‹©å™¨
  
  // å®¹å™¨ä¿¡æ¯ (åºåˆ—åŒ–åå¯ç”¨)
  containerSelector?: string;     // &quot;tr&quot;
  containerTagName?: string;      // &quot;TR&quot;
  
  // é”šç‚¹å€™é€‰
  anchorCandidates: AnchorCandidate[];
  
  // è·¯å¾„æ•°æ® (ä¾› AI ä½¿ç”¨)
  ancestorPath?: AncestorInfo[];  // ç¥–å…ˆè·¯å¾„ + è¯­ä¹‰è¯„åˆ†
  pathSelector?: string;          // AI ç”Ÿæˆçš„è·¯å¾„é€‰æ‹©å™¨
}</code></pre><h3 id="c7d1946c"><span class="ne-text">ç¥–å…ˆè·¯</span><span class="ne-text">å¾„ä¿¡æ¯ (</span><span class="ne-text">Ancest</span><span class="ne-text">orInfo</span><span class="ne-text">)</span></h3><pre data-language="markdown" id="GuKa7" class="ne-codeblock language-markdown"><code>// ä¾› AI åˆ†æçš„ç¥–å…ˆè·¯å¾„æ•°æ®
export interface AncestorInfo {
  tagName: string;          // &quot;div&quot;
  id?: string;              // ç¨³å®š ID
  classes: string[];        // [&quot;official-header&quot;, &quot;section&quot;]
  semanticScore: number;    // 0.9 (è¯­ä¹‰è¯„åˆ†)
  selector: string;         // &quot;.official-header&quot;
  outerHTML: string;        // æˆªæ–­çš„ HTML (å‰ 200 å­—ç¬¦)
  depth: number;            // è·ç¦»ç›®æ ‡çš„æ·±åº¦
  isSemanticRoot: boolean;  // æ˜¯å¦é€‚åˆä½œä¸ºæ ¹
}</code></pre><h3 id="14165126"><span class="ne-text">AI</span><span class="ne-text"> </span><span class="ne-text">ä¼˜</span><span class="ne-text">åŒ–æ—¶</span><span class="ne-text">ä¼ </span><span class="ne-text">é€’çš„ä¸Š</span><span class="ne-text">ä¸‹æ–‡</span></h3><pre data-language="markdown" id="pjTa6" class="ne-codeblock language-markdown"><code>// å‘é€ç»™ AI çš„å®Œæ•´ä¸Šä¸‹æ–‡
const payload = {
  intent: 'å®šä½å¹¶æ“ä½œç›®æ ‡å…ƒç´ ',
  targetSelector: analysis.targetSelector,
  targetHtml: getTargetHtml(analysis),
  ancestorPath: analysis.ancestorPath,  // â† AncestorInfo[]
  structureInfo: {
    containerType: analysis.containerType,
    hasRepeatingStructure: analysis.containerType !== 'single',
    containerSelector: analysis.containerSelector,
    anchorCandidates: analysis.anchorCandidates,  // â† AnchorCandidate[]
  },
};</code></pre><hr id="qjAWL" class="ne-hr"><h2 id="8c772e91"><span class="ne-text">ğŸ“Š</span><span class="ne-text"> æ€»ç»“</span></h2><p id="ue9d59a36" class="ne-p"><span class="ne-text" style="font-size: 13px">æ‰€æœ‰æ ¸å¿ƒ Schema éƒ½å·²æ˜ç¡®å®šä¹‰ï¼Œæ•°æ®æµå·²æ‰“é€šï¼ŒUI å’Œæ‰§è¡Œå¼•æ“å‡åŸºäº UnifiedSelector å·¥ä½œã€‚</span></p></details>
[æ­¤å¤„ä¸ºè¯­é›€å¡ç‰‡ï¼Œç‚¹å‡»é“¾æ¥æŸ¥çœ‹](about:blank#rdbke)

<details class="lake-collapse"><summary id="u35ae2af1"><span class="ne-text">è®¾è®¡åŸç†</span></summary><pre data-language="markdown" id="ej5xw" class="ne-codeblock language-markdown"><code># Homura é€‰æ‹©å™¨è®¾è®¡æ–‡æ¡£

&gt; ğŸ¯ **æ ¸å¿ƒç†å¿µ**ï¼šç»Ÿä¸€æ•°æ®ç»“æ„ï¼Œæ™ºèƒ½ç­–ç•¥è·¯ç”±ï¼Œè¯­ä¹‰ä¼˜å…ˆå®šä½

---

## ğŸ“ ç»Ÿä¸€é€‰æ‹©å™¨ (UnifiedSelector)

æ‰€æœ‰é€‰æ‹©å™¨ç»Ÿä¸€ä½¿ç”¨ `UnifiedSelector` schemaï¼Œæ”¯æŒä¸¤ç§ç­–ç•¥ï¼š

```typescript
interface UnifiedSelector {
  id: string;                    // å”¯ä¸€æ ‡è¯†ç¬¦
  strategy: 'path' | 'scope_anchor_target' | 'direct';
  fullSelector: string;          // æœ€ç»ˆ CSS é€‰æ‹©å™¨
  confidence: number;            // ç½®ä¿¡åº¦ 0-1
  validated: boolean;            // æ˜¯å¦å·²éªŒè¯

  // ç­–ç•¥ A: Path Selector
  pathData?: {
    root: string;                // è¯­ä¹‰æ ¹ (å¦‚ &quot;.header&quot;)
    intermediates: string[];     // ä¸­é—´è·¯å¾„
    target: string;              // ç›®æ ‡é€‰æ‹©å™¨
  };

  // ç­–ç•¥ B: Scope + Anchor + Target
  structureData?: {
    scope: { selector: string; type: 'container_list' | 'single_container' };
    anchor?: { selector: string; type: 'text_match' | 'attribute_match'; value: string; matchMode: string };
    target: { selector: string };
  };

  action: { type: 'CLICK' | 'INPUT' | 'EXTRACT' | 'WAIT' | 'NAVIGATE'; params?: object };
}
```

---

## ğŸ”€ æ™ºèƒ½ç­–ç•¥è·¯ç”±

| åœºæ™¯ | ç­–ç•¥ | è§¦å‘æ¡ä»¶ |
|------|------|----------|
| è¡¨æ ¼/åˆ—è¡¨ä¸­çš„å…ƒç´  | `scope_anchor_target` | æ£€æµ‹åˆ°é‡å¤å®¹å™¨ + æœ‰é”šç‚¹å€™é€‰ |
| å•ä¸€åµŒå¥—å…ƒç´  | `path` | æ— é‡å¤ç»“æ„ + æœ‰è¯­ä¹‰ç¥–å…ˆ |
| ç®€å•å”¯ä¸€å…ƒç´  | `direct` | å…ƒç´ æœ¬èº«è¶³å¤Ÿå”¯ä¸€ |

---

## ğŸ“ ç­–ç•¥ A: Path Selector

é€‚ç”¨äº**å•ä¸€ã€å¤æ‚ã€éé‡å¤**å…ƒç´ ï¼š

```
ç›®æ ‡: input.search-input
        â†“ å‘ä¸Šéå† DOM
div.search-box (score: 0.2) â† è·³è¿‡
        â†“
header.main-header (score: 0.9) â† è¯­ä¹‰æ ¹ âœ“

ç”Ÿæˆ: .main-header .search-box input.search-input
```

### è¯­ä¹‰è¯„åˆ†è§„åˆ™

```typescript
// é«˜åˆ†æ¨¡å¼ (0.7-0.9)
/^(official|custom|primary|main)/i
/(-header|-footer|-sidebar|-modal|-form)/i

// è·³è¿‡æ¨¡å¼
/^(input|box|item|wrapper|container)$/i
/^(el-|ant-|van-|v-|ng-)/i  // æ¡†æ¶å‰ç¼€
/^(is-|has-|active|hover)/i  // çŠ¶æ€ç±»
```

---

## ğŸ“ ç­–ç•¥ B: Scope + Anchor + Target

é€‚ç”¨äº**é‡å¤ç»“æ„**ï¼ˆè¡¨æ ¼ã€åˆ—è¡¨ã€å¡ç‰‡ï¼‰ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. SCOPE: æ‰¾åˆ°æ‰€æœ‰å®¹å™¨                                       â”‚
â”‚    selector: &quot;tr&quot; â†’ [Row1, Row2, Row3, ...]                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚ Row1: å¼ ä¸‰ | è®¡ç®—æœºå­¦é™¢ | [æ‰¹å‡†]                     â”‚  â”‚
â”‚    â”‚ Row2: æå›› | è‰ºæœ¯å­¦é™¢   | [æ‰¹å‡†] â† 2. ANCHOR åŒ¹é…    â”‚  â”‚
â”‚    â”‚ Row3: ç‹äº” | æ•°å­¦å­¦é™¢   | [æ‰¹å‡†]                     â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                â†“                            â”‚
â”‚                     3. TARGET: ç‚¹å‡» [æ‰¹å‡†]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é«˜ç†µå€¼é”šç‚¹é€‰æ‹© (Entropy-Aware Anchor Selection)

é”šç‚¹å¿…é¡»èƒ½**åŒºåˆ†ä¸åŒè¡Œ**ï¼Œè€Œä¸ä»…ä»…æ˜¯&quot;å­˜åœ¨äºå½“å‰è¡Œ&quot;ã€‚

**é—®é¢˜æ¡ˆä¾‹**ï¼š
```
Row1: Alice  | Pending | [Approve]
Row2: Bob    | Pending | [Approve]  â† ç”¨æˆ·ç‚¹å‡»è¿™é‡Œ
Row3: å¼ ä¸‰   | Pending | [Approve]
```

âŒ **é”™è¯¯é”šç‚¹**: `span.status` (text: &quot;Pending&quot;) - åœ¨æ‰€æœ‰è¡Œéƒ½å­˜åœ¨  
âœ… **æ­£ç¡®é”šç‚¹**: `td.student-name` (text: &quot;Bob&quot;) - ä»…åœ¨å½“å‰è¡Œå”¯ä¸€

**ç®—æ³•æµç¨‹**ï¼š
```
1. è·å–å…„å¼Ÿå®¹å™¨ (sibling TRs)
2. å¯¹æ¯ä¸ªå€™é€‰é”šç‚¹:
   - ç»Ÿè®¡åœ¨å…„å¼Ÿè¡Œä¸­çš„å‡ºç°é¢‘ç‡
   - é¢‘ç‡ = 0 â†’ å”¯ä¸€ â†’ ç½®ä¿¡åº¦ +30%
   - é¢‘ç‡ &gt; 0 â†’ é‡å¤ â†’ ç½®ä¿¡åº¦ Ã— (1 - ratio Ã— 0.9)
3. ä½ç†µè¯æ±‡ (pending, edit, delete...) â†’ ç½®ä¿¡åº¦ Ã— 0.3
4. æŒ‰ isUnique &gt; confidence æ’åº
```

**ä½ç†µè¯æ±‡é»‘åå•**ï¼š
```
pending, approved, rejected, edit, delete, save, cancel,
status, action, yes, no, true, false, n/a, ...
```

---

## ğŸ” ç”Ÿæˆæµç¨‹

```
ç”¨æˆ·ç‚¹å‡»å…ƒç´ 
      â†“
analyzeElement() â†’ ElementAnalysis
      â†“
determineStrategy() â†’ 'path' | 'scope_anchor_target' | 'direct'
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Path            â”‚ Scope+Anchor+Target       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ buildPathData() â”‚ buildStructureData()      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
createUnifiedSelector() â†’ UnifiedSelector
      â†“
(å¯é€‰) AI ä¼˜åŒ– â†’ æ›´æ–° UnifiedSelector
```

---

## ğŸ› ï¸ æ ¸å¿ƒå‡½æ•°

### analyzer.ts

| å‡½æ•° | ä½œç”¨ |
|------|------|
| `analyzeElement(el)` | åˆ†æå…ƒç´ ï¼Œè¿”å› `ElementAnalysis` |
| `collectAncestorPath(el)` | æ”¶é›†ç¥–å…ˆè·¯å¾„ + è¯­ä¹‰è¯„åˆ† |
| `findRepeatingContainer(el)` | æ‰¾é‡å¤å®¹å™¨ (TR/LI/ARTICLE) |

| `findAnchorCandidates(container)` | **é«˜ç†µå€¼é”šç‚¹é€‰æ‹©** (è·¨è¡Œå”¯ä¸€æ€§éªŒè¯) |
| `getSiblingContainers(container)` | è·å–å…„å¼Ÿå®¹å™¨ç”¨äºå”¯ä¸€æ€§éªŒè¯ |
| `countSiblingMatches(...)` | ç»Ÿè®¡é”šç‚¹å€¼åœ¨å…„å¼Ÿè¡Œçš„å‡ºç°é¢‘ç‡ |
| `buildMinimalSelector(el)` | ç”Ÿæˆæœ€å°åŒ–é€‰æ‹©å™¨ |

### generator.ts

| å‡½æ•° | ä½œç”¨ |
|------|------|
| `createUnifiedSelector(analysis)` | åˆ›å»ºç»Ÿä¸€é€‰æ‹©å™¨ |
| `determineStrategy(analysis)` | å†³å®šæœ€ä½³ç­–ç•¥ |
| `buildPathData(analysis)` | æ„å»ºè·¯å¾„æ•°æ® |
| `buildStructureData(analysis)` | æ„å»ºç»“æ„æ•°æ® |
| `convertPathSelectorToUnified()` | æ—§æ ¼å¼è½¬æ¢ |
| `convertUnifiedToSelectorLogic()` | è½¬æ¢ä¸ºæ‰§è¡Œæ ¼å¼ |

### executor.ts

| å‡½æ•° | ä½œç”¨ |
|------|------|
| `executeUnifiedSelector(selector)` | æ‰§è¡Œç»Ÿä¸€é€‰æ‹©å™¨ |
| `executeTool(tool)` | æ‰§è¡ŒåŸå­å·¥å…· |
| `resolveAnchor(scopes, anchor)` | **å¤šå€™é€‰éå†** - æœç´¢æ‰€æœ‰åŒ¹é…å…ƒç´  |
| `resolveAnchorInSplitTable(...)` | **Split Table æ”¯æŒ** - è™šæ‹Ÿå¤åˆä½œç”¨åŸŸ |

---

## ğŸ”§ æ‰§è¡Œå¼•æ“ä¿®å¤

### å¤šå€™é€‰é”šç‚¹éå† (Multi-Match Anchor Traversal)

**é—®é¢˜**: å½“ Cell ä¸­æœ‰å¤šä¸ªå…ƒç´ æ—¶ï¼Œæ—§é€»è¾‘åªæ£€æŸ¥ç¬¬ä¸€ä¸ªï¼š
```html
&lt;td&gt;&lt;a&gt;è¯¦æƒ…&lt;/a&gt; | &lt;a&gt;å®‰æ’æ•™å®¤&lt;/a&gt;&lt;/td&gt;
```
æŸ¥æ‰¾ &quot;å®‰æ’æ•™å®¤&quot; æ—¶ï¼Œ`querySelector` è¿”å› &quot;è¯¦æƒ…&quot;ï¼ŒåŒ¹é…å¤±è´¥ã€‚

**ä¿®å¤**: ä½¿ç”¨ `querySelectorAll` éå†æ‰€æœ‰å€™é€‰ï¼š
```typescript
const anchorCandidates = querySelectorAll(anchor.selector, scopeEl);
for (const candidate of anchorCandidates) {
  if (matchText(candidate.textContent, anchor.value)) {
    return { element: scopeEl, index: i };  // âœ“ æ‰¾åˆ°
  }
}
```

### Split Table æ”¯æŒ (è™šæ‹Ÿå¤åˆä½œç”¨åŸŸ)

**é—®é¢˜**: jqxGrid ç­‰ä½¿ç”¨&quot;åŒè¡¨æ‹¼æ¥&quot;å®ç°åˆ—å†»ç»“ï¼Œå·¦å³è¡¨çš„è¡Œå…±äº« IDï¼š
```
#pinnedtabledsh: [è¯¦æƒ… | å®‰æ’æ•™å®¤]  â† æ“ä½œæŒ‰é’®
#tabledsh:        [å¼ ä¸‰ | å­¦é™¢ | ...]  â† æ•°æ®åˆ—
                   ^
                   ä¸¤ä¸ª TR æœ‰ç›¸åŒ ID: row0dsh-index-table
```

å½“ Anchor åœ¨å³è¡¨ (text: &quot;å¼ ä¸‰&quot;)ï¼ŒTarget åœ¨å·¦è¡¨ (&quot;å®‰æ’æ•™å®¤&quot;) æ—¶ï¼Œä¼ ç»Ÿçš„ `scope.contains(target)` ä¼šå¤±è´¥ã€‚

**ä¿®å¤**: Virtual Composite Scope
```
1. æ£€æµ‹ Scope ä¸­æ˜¯å¦æœ‰é‡å¤ ID
2. å°†åŒ ID çš„å…ƒç´ åˆå¹¶ä¸º&quot;é€»è¾‘è¡Œ&quot;
3. Anchor å¯åœ¨ä»»æ„è¡¨åŒ¹é…
4. Target è·¨æ‰€æœ‰åŒ ID å…ƒç´ æœç´¢
```

---

## ğŸ“Š é€‰æ‹©å™¨ä¼˜å…ˆçº§

ç”Ÿæˆæœ€å°åŒ–é€‰æ‹©å™¨æ—¶çš„ä¼˜å…ˆçº§ï¼š

```
1. ç¨³å®š ID        â†’ #submit-btn
2. data-testid   â†’ [data-testid=&quot;search&quot;]
3. name å±æ€§     â†’ input[name=&quot;username&quot;]
4. è¯­ä¹‰ class    â†’ button.btn-primary
5. role/type     â†’ button[type=&quot;submit&quot;]
6. ç»“æ„ä½ç½®      â†’ button:nth-of-type(2)
```

### é¿å…çš„é€‰æ‹©å™¨

```typescript
// âŒ ä¸ç¨³å®š
element.id.match(/\d{5,}|uuid|random|react|vue/i)  // åŠ¨æ€ID
element.classList.match(/active|hover|ng-|vue-/i)   // çŠ¶æ€ç±»

// âŒ éæ ‡å‡† CSS
button:contains(&quot;Search&quot;)  // jQuery è¯­æ³•
```

---

### å•å…ƒæ ¼çº§åˆ«ç²¾ç¡®å®šä½ (Cell-Level Targeting)

**é—®é¢˜**: è¡¨æ ¼è¡Œå†…æ‰€æœ‰ TD å…·æœ‰ç›¸åŒ class (`jqx-cell.jqx-grid-cell`)ï¼Œå¯¼è‡´ç›®æ ‡é€‰æ‹©å™¨ä¸ç²¾ç¡®ï¼š
```
targetSelector: td.jqx-cell.jqx-grid-cell span  â† åŒ¹é…è¡Œå†…æ‰€æœ‰ span
```

**ä¿®å¤**: `buildMinimalSelector` ç°åœ¨ä¼šæ£€æŸ¥é€‰æ‹©å™¨å”¯ä¸€æ€§ï¼š
```typescript
// ç”Ÿæˆ class-based é€‰æ‹©å™¨åï¼Œæ£€æŸ¥åœ¨çˆ¶å…ƒç´ ä¸­æ˜¯å¦å”¯ä¸€
const matches = parent.querySelectorAll(`:scope &gt; ${baseSelector}`);
if (matches.length &gt; 1) {
  // ä¸å”¯ä¸€ â†’ æ·»åŠ  nth-of-type ç²¾ç¡®å®šä½
  return `${baseSelector}:nth-of-type(${index})`;
}
```

**ç»“æœ**:
```
æ—§: td.jqx-cell.jqx-grid-cell span     â† åŒ¹é…æ‰€æœ‰å•å…ƒæ ¼
æ–°: td.jqx-cell:nth-of-type(5) span    â† åªåŒ¹é…ç¬¬5åˆ—
```

---

## ğŸ“ è®¾è®¡å†³ç­–

| æ—¥æœŸ | å†³ç­– | åŸå›  |
|------|------|------|
| 2026-01-31 | è·³è¿‡ TD/TH ä½œä¸ºå®¹å™¨ | TD æ˜¯å•å…ƒæ ¼ï¼ŒTR æ‰æ˜¯è¡Œ |
| 2026-01-31 | æ·»åŠ è¯­ä¹‰å®¹å™¨è¯†åˆ« | æ”¯æŒ `.search-bar button` è¿™ç±»æ¨¡å¼ |
| 2026-02-01 | å¼•å…¥ UnifiedSelector | ç»Ÿä¸€ Path å’Œ Structure ä¸¤ç§ç­–ç•¥ |
| 2026-02-01 | æ·»åŠ  Quick Actions åŒæ¨¡å¼ | Path æ¨¡å¼ä¹Ÿéœ€è¦æµ‹è¯•æ“ä½œ |
| 2026-02-01 | **é«˜ç†µå€¼é”šç‚¹ä¼˜å…ˆ** | è·¨è¡Œå”¯ä¸€æ€§éªŒè¯ï¼Œé¿å… &quot;Pending&quot; è¿™ç±»é‡å¤å€¼è¯¯åŒ¹é… |
| 2026-02-01 | **å¤šå€™é€‰é”šç‚¹éå†** | ä¿®å¤ Cell å†…å¤šå…ƒç´ åœºæ™¯ `&lt;a&gt;è¯¦æƒ…&lt;/a&gt;\|&lt;a&gt;å®‰æ’&lt;/a&gt;` |
| 2026-02-01 | **Split Table æ”¯æŒ** | æ”¯æŒ jqxGrid ç­‰åŒè¡¨æ‹¼æ¥å¸ƒå±€ (Virtual Composite Scope) |
| 2026-02-01 | **å•å…ƒæ ¼ç²¾ç¡®å®šä½** | æ£€æŸ¥é€‰æ‹©å™¨å”¯ä¸€æ€§ï¼Œä¸å”¯ä¸€æ—¶æ·»åŠ  `nth-of-type` |

---

*ğŸ“Œ æœ¬æ–‡æ¡£è®°å½• Homura é€‰æ‹©å™¨ç³»ç»Ÿçš„è®¾è®¡ï¼Œä¾›å¼€å‘å‚è€ƒ*</code></pre><p id="u17855bca" class="ne-p"><span class="ne-text"></span></p></details>
ç°åœ¨æ•ˆæœè¿˜å¯ä»¥ï¼Œä¸‹ä¸€æ­¥æ€è€ƒæ­ä¼˜åŒ–é€‰æ‹©å™¨agentæˆ–è€…æˆ–è€…æŠŠå½“å‰åŠŸèƒ½é›†æˆåˆ°å½•åˆ¶æ¨¡å¼é‡Œæˆ–è€…ç›´æ¥å¼€å§‹å·¥å…·é›†åŠŸèƒ½çš„å®ç°

# 0202
## é’ˆå¯¹tailwindcssè¿›è¡Œçš„é€‰æ‹©å™¨ä¼˜åŒ–
[æ­¤å¤„ä¸ºè¯­é›€å¡ç‰‡ï¼Œç‚¹å‡»é“¾æ¥æŸ¥çœ‹](about:blank#p9BqO)

è¿˜æ˜¯å¥½è´¹money,ä¸è¿‡è¿˜å¥½æœ‰å¯åŠ¨èµ„é‡‘<!-- è¿™æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œocr å†…å®¹ä¸ºï¼š -->
![](https://cdn.nlark.com/yuque/0/2026/jpeg/49377948/1770028931690-43c87323-762d-4a82-9680-cbec919e62e7.jpeg)

# 0203
## å½•åˆ¶åŠŸèƒ½åˆæ­¥é›†æˆ
[æ­¤å¤„ä¸ºè¯­é›€å¡ç‰‡ï¼Œç‚¹å‡»é“¾æ¥æŸ¥çœ‹](about:blank#BZYyG)

å½•åˆ¶åŠŸèƒ½æœ‰å¾ˆå¤šå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œæ˜å¤©ç»§ç»­ä¼˜åŒ–ï¼Œè¿‡é˜µå­å¼€å§‹æ­£å¼æ­æ‰§è¡Œå¼•æ“ï¼Œæ˜å¤©å…ˆæŠŠè‡ªåŠ¨é¡µé¢è·³è½¬ç»™åŠ ä¸Š

